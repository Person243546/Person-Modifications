<?xml version="1.0" encoding="utf-8" ?>
<Patch>

	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Too Many Mods - Compats and Rebalances</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
		<li Class="PatchOperationFindMod">
		<mods>
			<li>Rimsenal Factions</li>
		</mods>
			<match Class="PatchOperationSequence">
			<operations>
			
			<li Class="PatchOperationRemove">
				<xpath>Defs/KCSG.SettlementLayoutDef[defName="TMM_GDDefence" or defName="TMM_CPDDefence"]/stockpileOptions/fillWithDefs/li[.="GD_INGrenadeLauncher"]</xpath>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>Defs/KCSG.SettlementLayoutDef[defName="TMM_GDDefence" or defName="TMM_CPDDefence"]/stockpileOptions/fillWithDefs/li[.="GD_SKGrenadeLauncher"]</xpath>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>Defs/KCSG.SettlementLayoutDef[defName="TMM_GDDefence" or defName="TMM_CPDDefence"]/stockpileOptions/fillWithDefs/li[.="GD_BSLauncher"]</xpath>
			</li>
				
			</operations>
			</match>
		</li>
		
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Genetics Expanded</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
			<li Class="PatchOperationAdd">
				<xpath>Defs</xpath>
				<value>
				<RecipeDef ParentName="GR_BoosterRecipeBase">
					<defName>GR_CraftMechaniteBooster</defName>
					<label>Craft Mechanite Booster</label>
					<workAmount>1500</workAmount>
					<description>Craft mechanite booster.</description>
					<ingredients>
						<li>
							<filter>
								<thingDefs>
									<li>GR_BoosterStabilizator</li>
								</thingDefs>
							</filter>
							<count>10</count>
						</li>
						<li>
							<filter>
								<thingDefs>
									<li>GR_BoosterController</li>
								</thingDefs>
							</filter>
							<count>5</count>
						</li>
						<li>
							<filter>
								<thingDefs>
									<li>GR_BoosterFertility</li>
								</thingDefs>
							</filter>
							<count>5</count>
						</li>
						<li>
							<filter>
								<thingDefs>
									<li>GR_BoosterTempo</li>
								</thingDefs>
							</filter>
							<count>5</count>
						</li>
						<li>
							<filter>
								<thingDefs>
									<li>Luciferium</li>
								</thingDefs>
							</filter>
							<count>5</count>
						</li>
						<li>
							<filter>
								<thingDefs>
									<li>MedicineUltratech</li>
								</thingDefs>
							</filter>
							<count>3</count>
						</li>
					</ingredients>
					<fixedIngredientFilter>
						<thingDefs>
							<li>GR_BoosterStabilizator</li>
							<li>GR_BoosterController</li>
							<li>GR_BoosterFertility</li>
							<li>GR_BoosterTempo</li>
							<li>Luciferium</li>
							<li>MedicineUltratech</li>
						</thingDefs>
					</fixedIngredientFilter>
					<products>
						<GR_MechaniteBooster>1</GR_MechaniteBooster>
					</products>
				</RecipeDef>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Mercenaries For Me</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
			<li Class="PatchOperationAddModExtension">
				<xpath>Defs/PawnKindDef[
					defName="MFM_IronAllianceTrader"	or
					defName="MFM_IronAllianceBowman"	or
					defName="MFM_IronAllianceGuard"	or
					defName="MFM_IronAllianceEliteGuard"	or
					defName="MFM_IronAllianceKnight"	or
					defName="MFM_IronAllianceLord"	or
					defName="MFM_IronAllianceEliteBowman"	or
					defName="MFM_IronAllianceVillager"
					]</xpath>
				<value>	
					<li Class="CombatExtended.LoadoutPropertiesExtension">	
						<primaryMagazineCount>
							<min>10</min>
							<max>20</max>
						</primaryMagazineCount>
					</li>
				</value>
			</li>
			
			<!--
			<li Class="PatchOperationAdd">
				<xpath>Defs/PawnKindDef[
					defName="MFM_IronAllianceTrader"	or
					defName="MFM_IronAllianceBowman"	or
					defName="MFM_IronAllianceGuard"	or
					defName="MFM_IronAllianceEliteGuard"	or
					defName="MFM_IronAllianceKnight"	or
					defName="MFM_IronAllianceLord"	or
					defName="MFM_IronAllianceEliteBowman"	or
					defName="MFM_IronAllianceVillager"
				]</xpath>
				<value>
					<apparelRequired/>
				</value>
			</li>
			-->
			<li Class="PatchOperationAdd">
				<xpath>Defs/PawnKindDef[
					defName="MFM_IronAllianceTrader"	or
					defName="MFM_IronAllianceBowman"	or
					defName="MFM_IronAllianceGuard"	or
					defName="MFM_IronAllianceEliteGuard"	or
					defName="MFM_IronAllianceKnight"	or
					defName="MFM_IronAllianceLord"	or
					defName="MFM_IronAllianceEliteBowman"	or
					defName="MFM_IronAllianceVillager"
				]/apparelRequired</xpath>
				<value>
					<li>CE_Apparel_Backpack</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Combat Extended</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
			<li Class="PatchOperationAdd">
				<xpath>Defs/PawnKindDef[
					defName="Tribal_HeavyArcher"
				]/apparelRequired</xpath>
				<value>
					<li>CE_Apparel_TribalBackpack</li>
				</value>
			</li>
			
			<li Class="PatchOperationConditional">
				<xpath>Defs/PawnKindDef[
					@Name="MercenaryEliteTierBase"
				]/apparelRequired</xpath>
				<nomatch Class="PatchOperationAdd">
					<xpath>Defs/PawnKindDef[
					@Name="MercenaryEliteTierBase"
				]</xpath>
					<value>
						<apparelRequired/>
					</value>
				</nomatch>
				<match Class="PatchOperationAdd">
					<xpath>Defs/PawnKindDef[
					@Name="MercenaryEliteTierBase"
				]</xpath>
					<value>
					</value>
				</match>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/PawnKindDef[
					@Name="MercenaryEliteTierBase"
				]/apparelRequired</xpath>
				<value>
						<li>CE_Apparel_TacVest</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationRemove">
		<xpath>Defs/ThingSetMakerDef[defName="Reward_ItemsStandard"]/root/options/li[minTotalMarketValue="5500"]/thingSetMaker/options/li[3]</xpath>
	</Operation>

	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Factions Expanded - Pirates</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/FactionDef[
					defName="VFEP_Junkers"
				]/techLevel</xpath>
				<value>
						<techLevel>Ultra</techLevel>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Spacertech Raiders for Outlanders and Pirates</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/FactionDef[
					@Name="OutlanderFactionBase"
				]/techLevel</xpath>
				<value>
					<techLevel>Spacer</techLevel>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/FactionDef[
					defName="Mechanoid"
				]/techLevel</xpath>
				<value>
					<techLevel>Spacer</techLevel>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Anomaly</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/FactionDef[
					defName="HoraxCult"
				]/techLevel</xpath>
				<value>
					<techLevel>Industrial</techLevel>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>The Dead Man's Switch</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
			<li Class="PatchOperationFindMod">
			<mods>
				<li>Combat Extended Guns</li>
			</mods>
				<match Class="PatchOperationSequence">
				<operations>
					
					<li Class="PatchOperationAddModExtension">
						<xpath>Defs/ThingDef[
							defName="CE_Gun_AKM" or
							defName="CE_Gun_FNFAL" or
							defName="Gun_SniperRifle" or
							defName="CE_Gun_HecateTwo" or
							defName="CE_Gun_MSixty" or
							defName="CE_Gun_USASTwelve" or
							defName="Gun_Minigun"
						]</xpath>
						<value>	
							<li Class="DMS.HeavyEquippableExtension">
								<EquippableDef>AverageHumanCanUse</EquippableDef>
							</li>
						</value>
					</li>
					
				</operations>
				</match>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="DMS_Ceramics"]/statBases/StuffPower_Armor_Sharp</xpath>
				<value>
					<StuffPower_Armor_Sharp>1.4</StuffPower_Armor_Sharp>
				</value>
			</li>
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[@Name="BaseAutomatroidRace"]/statBases/PsychicSensitivity</xpath>
				<value>
					<PsychicSensitivity>0.25</PsychicSensitivity>
				</value>
			</li>
			<!--
			<li Class="PatchOperationReplace">
				<xpath>Defs/KCSG.SymbolDef[defName="DMS_DeposableRocketLauncher"]/thing</xpath>
				<value>
					<thing>CE_DisposableRocketLauncher</thing>
				</value>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>Defs/ThingDef[defName="DMS_DeposableRocketLauncher"]</xpath>
			</li>
			-->
			<li Class="PatchOperationConditional">
				<xpath>Defs/PawnKindDef[defName="DMS_Mech_Iguana"]/inventoryOptions</xpath>
				<nomatch Class="PatchOperationAdd">
					<xpath>Defs/PawnKindDef[defName="DMS_Mech_Iguana"]</xpath>
					<value>
						<inventoryOptions/>
					</value>
				</nomatch>
				<match Class="PatchOperationAdd">
					<xpath>Defs/PawnKindDef[defName="DMS_Mech_Iguana"]</xpath>
					<value>
					</value>
				</match>
			</li>
			
			<li Class="PatchOperationConditional">
				<xpath>Defs/PawnKindDef[defName="DMS_Mech_Dogge"]/inventoryOptions</xpath>
				<nomatch Class="PatchOperationAdd">
					<xpath>Defs/PawnKindDef[defName="DMS_Mech_Dogge"]</xpath>
					<value>
						<inventoryOptions/>
					</value>
				</nomatch>
				<match Class="PatchOperationAdd">
					<xpath>Defs/PawnKindDef[defName="DMS_Mech_Dogge"]</xpath>
					<value>
					</value>
				</match>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/PawnKindDef[defName="DMS_Mech_Iguana" or defName="DMS_Mech_Dogge"]/inventoryOptions</xpath>
				<value>
					<skipChance>0</skipChance>
						<subOptionsChooseOne>
						  <li>
							<choiceChance>33</choiceChance>
							<thingDef>Ammo_Pistol_FMJ</thingDef>
							<countRange>
							  <min>300</min>
							  <max>1200</max>
							</countRange>
						  </li>
						  <li>
							<choiceChance>34</choiceChance>
							<thingDef>Ammo_Pistol_AP</thingDef>
							<countRange>
							  <min>300</min>
							  <max>1200</max>
							</countRange>
						  </li>
						  <li>
							<choiceChance>33</choiceChance>
							<thingDef>Ammo_Pistol_HP</thingDef>
							<countRange>
							  <min>300</min>
							  <max>1200</max>
							</countRange>
						  </li>
						</subOptionsChooseOne>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Biotech</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/WorkGiverDef[
				defName="Refuel"
				]</xpath>
				<value>
					<canBeDoneByMechs>true</canBeDoneByMechs>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="Gun_InfernoCannon"]/verbs/li[@Class="CombatExtended.VerbPropertiesCE"]</xpath>
				<value>
					<targetParams>
						<canTargetLocations>true</canTargetLocations>
					</targetParams>
				</value>
			</li>
			<!--
			<li Class="PatchOperationRemove">
				<xpath>Defs/XenotypeDef[defName="Genie"]/genes/li[text()="Hair_BaldOnly"]</xpath>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/XenotypeDef[defName="Genie"]/genes</xpath>
				<value>
					<li>Hair_Grayless</li>
					<li>Hair_LightTeal</li>
				</value>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>Defs/XenotypeDef[defName="Highmate"]/genes/li[text()="Skin_SheerWhite"]</xpath>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/XenotypeDef[defName="Highmate"]/genes</xpath>
				<value>
					<li>Ears_Cat</li>
				</value>
			</li>
			-->
			<li Class="PatchOperationAdd">
				<xpath>Defs/XenotypeDef[defName="Impid"]/genes</xpath>
				<value>
					<li>Body_Standard</li>
					<li>Body_Thin</li>
				</value>
			</li>
			<!--
			<li Class="PatchOperationRemove">
				<xpath>Defs/XenotypeDef[defName="Neanderthal"]/genes/li[text()="Body_Fat"]</xpath>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/XenotypeDef[defName="Pigskin"]/genes</xpath>
				<value>
					<li>Body_Standard</li>
					<li>Skin_PaleRed</li>
				</value>
			</li>-->
			<!--
			<li Class="PatchOperationRemove">
				<xpath>Defs/XenotypeDef[defName="Yttakin"]/genes/li[text()="Body_Hulk"] | Defs/XenotypeDef[defName="Yttakin"]/genes/li[text()="Hair_BaldOnly"] | Defs/XenotypeDef[defName="Yttakin"]/genes/li[text()="Beard_Always"]</xpath>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/XenotypeDef[defName="Yttakin"]/genes</xpath>
				<value>
					<li>Body_Standard</li>
					<li>Ears_Cat</li>
				</value>
			</li>
			-->
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Factions Expanded - Tribals</li>
		</mods>
		<match Class="PatchOperationFindMod">
			<mods>
				<li>ReBuild: Doors and Corners</li>
			</mods>
			<match Class="PatchOperationSequence">
				<operations>
					<li Class="PatchOperationAdd">
						<xpath>/Defs/ThingDef[defName="RB_RusticWall" or defName="RB_OverwallArmor"]</xpath>
						<value>
							<researchPrerequisites>
								<li>VFET_Construction</li>
							</researchPrerequisites>
						</value>
					</li>
					<li Class="PatchOperationAdd">
						<xpath>/Defs/ThingDef[defName="RB_OrnateWall"]/researchPrerequisites</xpath>
						<value>
							<li>VFET_Construction</li>
						</value>
					</li>
					<li Class="PatchOperationAdd">
						<xpath>/Defs/TerrainDef[defName="RB_FinePlankWood"]</xpath>
						<value>
							<researchPrerequisites>
								<li>VFET_Construction</li>
							</researchPrerequisites>
						</value>
					</li>
				</operations>
			</match>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Positive Connections</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThoughtDef[defName="DIL_SuccessfulMediation"]/stages/li[1]/baseMoodEffect</xpath>
				<value>
					<baseMoodEffect>3</baseMoodEffect>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThoughtDef[defName="DIL_SuccessfulMediation"]/stages/li[2]/baseMoodEffect</xpath>
				<value>
					<baseMoodEffect>6</baseMoodEffect>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThoughtDef[defName="DIL_SuccessfulMediation"]/stages/li[3]/baseMoodEffect</xpath>
				<value>
					<baseMoodEffect>10</baseMoodEffect>
				</value>
			</li>
			
			
		</operations>
		</match>
	</Operation>
	<!--
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Ideology Expanded - Memes and Structures</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			
		<li Class="PatchOperationReplace">
			<xpath>/Defs/PreceptDef[defName="VME_IdeoRole_Nurse"]/roleDisabledWorkTags</xpath>
			<value>
				<roleDisabledWorkTags></roleDisabledWorkTags>
			</value>
		</li>
			
			
		</operations>
		</match>
	</Operation>-->
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Alpha Genes</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/GeneDef[defName="AG_HeatImmunity"]</xpath>
				<value>
					<statFactors>
						<Flammability>0</Flammability>
					</statFactors>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/FactionDef[defName="TribeSavageImpid"]/xenotypeSet/xenotypeChances</xpath>
				<value>
					<xenotypeChances>
						<Impid>0.95</Impid>
						<AG_Efreet>0.05</AG_Efreet>
					</xenotypeChances>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_8x35mmCharged_ForsakenSniper"]</xpath>
				<value>
					<similarTo>AmmoSet_ChargedRifle</similarTo>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_12GaugeCharged_ForsakenShotGun"]</xpath>
				<value>
					<similarTo>AmmoSet_ChargedShotgun</similarTo>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/CombatExtended.AmmoSetDef[defName="AmmoSet_5x35mmCharged_ForsakenAR"]</xpath>
				<value>
					<similarTo>AmmoSet_MechCharged</similarTo>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Integrated Implants</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
		<li Class="PatchOperationReplace">
			<xpath>Defs/HediffDef[defName="StrengthEnhancer"]/stages</xpath>
			<value>
				<stages>
				  <li>
					<statOffsets>
					  <CarryingCapacity>25</CarryingCapacity>
					  <CarryWeight>25</CarryWeight>
					</statOffsets>
					<statFactors>
					  <MeleeDamageFactor>1.25</MeleeDamageFactor>
					</statFactors>
				   </li>
				</stages>
			</value>
		</li>
		
		<li Class="PatchOperationReplace">
			<xpath>Defs/HediffDef[defName="SkeletalBracing"]/stages</xpath>
			<value>
				<stages>
				  <li>
					<statOffsets>
					  <CarryingCapacity>25</CarryingCapacity>
					  <CarryWeight>25</CarryWeight>
					</statOffsets>
				   </li>
				</stages>
			</value>
		</li>
		
		<li Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Factions Expanded - Deserters</li>
		</mods>
			<match Class="PatchOperationSequence">
			<operations>
				
				<li Class="PatchOperationRemove">
					<xpath>Defs/HediffDef[
					defName="LTS_ImplantedShrapnel" or
					defName="LTS_ImplantedArmorPiercing" or
					defName="LTS_ImplantedCluster"
					]</xpath>
				</li>
				
				<li Class="PatchOperationRemove">
					<xpath>Defs/RecipeDef[
					defName="LTS_InstallImplantedShrapnel" or
					defName="LTS_InstallImplantedArmorPiercing" or
					defName="LTS_InstallImplantedCluster" or
					defName="LTS_RemoveImplantedShrapnel" or
					defName="LTS_RemoveImplantedArmorPiercing" or
					defName="LTS_RemoveImplantedCluster"
					]</xpath>
				</li>
				
				<li Class="PatchOperationRemove">
					<xpath>Defs/AbilityDef[
					defName="DetonateImplantedShrapnel" or
					defName="DetonateImplantedArmorPiercing" or
					defName="DetonateImplantedCluster"
					]</xpath>
				</li>
				
			</operations>
			</match>
		</li>
		
		</operations>
		</match>
	</Operation>

	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Det's Battle Meds</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[defName="DV_AdrenalineShot" or defName="StimpackIndustrial" or defName="HerbalPowder" or defName="StimpackUltratech"]/statBases</xpath>
				<value>
					<Bulk>0.2</Bulk>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="DV_AdrenalineShot" or defName="StimpackIndustrial" or defName="HerbalPowder" or defName="StimpackUltratech"]/ingestible/drugCategory</xpath>
				<value>
					<drugCategory>Medical</drugCategory>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/HediffDef[defName="IndustrialStimpackHediff"]/stages/li/totalBleedFactor</xpath>
				<value>
					<totalBleedFactor>0.75</totalBleedFactor>
				</value>
			</li>
			
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Winter's Utility Bionics</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/HediffDef[defName="WelderArm"]/spawnThingOnRemoved</xpath>
				<value>
					<spawnThingOnRemoved>WelderArm</spawnThingOnRemoved>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Medical System Expansion 2</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[
				@Name="BodyPartProsthetic_Limb" or
				@Name="BodyPartBionic_Limb" or
				@Name="BodyPartAchotech_Limb"
				]</xpath>
				<value>
					<generateAllowChance>0.01</generateAllowChance>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[
				defName="SimpleProstheticArm" or
				defName="SimpleProstheticLeg" or
				defName="BionicArm" or
				defName="BionicLeg" or
				defName="ArchotechArm" or
				defName="ArchotechLeg"
				]</xpath>
				<value>
					<generateAllowChance>1</generateAllowChance>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[
				defName="BionicArm" or
				defName="BionicLeg"
				]/costList</xpath>
				<value>
					<costList>
					  <Plasteel>10</Plasteel>
					  <ComponentSpacer>2</ComponentSpacer>
					</costList>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[
				defName="BionicForearm"
				]/costList</xpath>
				<value>
					<costList>
					  <Plasteel>10</Plasteel>
					  <ComponentSpacer>2</ComponentSpacer>
					</costList>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[
				defName="BionicHand" or
				defName="BionicFoot"
				]/costList</xpath>
				<value>
					<costList>
					  <Plasteel>5</Plasteel>
					  <ComponentSpacer>1</ComponentSpacer>
					</costList>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[
				defName="BionicFinger" or
				defName="BionicToe"
				]/costList</xpath>
				<value>
					<costList>
					  <Plasteel>5</Plasteel>
					  <ComponentIndustrial>2</ComponentIndustrial>
					</costList>
				</value>
			</li>
			
			<!--
			<li Class="PatchOperationFindMod">
			<mods>
				<li>Winter's Utility Bionics</li>
			</mods>
				<match Class="PatchOperationSequence">
				<operations>
				
				<li Class="PatchOperationReplace">
					<xpath>Defs/ThingDef[defName="MechanicalManipulator"]/description</xpath>
					<value>
						<description>A general-purpose manipulator, not as good as normal hand but better than nothing. Can only be installed on specialized limbs.</description>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>Defs</xpath>
					<value>
					
					<ThingDef ParentName="BodyPartProstheticImperialBase">
						<defName>WelderArm</defName>
						<label>welder arm</label>
						<description>A biomechanical arm replacement. It has a built-in spot welder, which allows the user to rapidly construct machinery and buildings. It also has a general-purpose manipulator. It is somewhat ungainly, which slows down movement slightly /n/ The spot welder can inflict burns in melee combat.</description>
						<descriptionHyperlinks>
							<RecipeDef>InstallWelderArm</RecipeDef>
						</descriptionHyperlinks>
						<thingSetMakerTags>
							<li>RewardStandardLowFreq</li>
						</thingSetMakerTags>
						<costList>
							<Steel>60</Steel>
							<ComponentIndustrial>8</ComponentIndustrial>
						</costList>
						<recipeMaker>
							<researchPrerequisite>SpecializedLimbs</researchPrerequisite>
						</recipeMaker>
						<statBases>
							<WorkToMake>8000</WorkToMake>
						</statBases>
						<techHediffsTags>
						  <li>WelderArm</li>
						</techHediffsTags>
						<comps>
							<li Class="MSE2.CompProperties_IncludedChildParts">
								<standardChildren>
									<li>MechanicalManipulator</li>
									<li>MechanicalInternalSupport</li>
								</standardChildren>
							</li>
						</comps>
					</ThingDef>
					
					<ThingDef ParentName="BodyPartProstheticImperialBase">
						<defName>SawArm</defName>
						<label>saw arm</label>
						<description>A biomechanical arm replacement. It has a built-in angle grinder, which allows the user to rapidly inflict cuts in melee combat, The saw is also pretty good at harvesting crops. It also has a general-purpose manipulator. It is somewhat ungainly, which slows down movement slightly.</description>
						<descriptionHyperlinks>
							<RecipeDef>InstallSawArm</RecipeDef>
						</descriptionHyperlinks>
						<thingSetMakerTags>
							<li>RewardStandardLowFreq</li>
						</thingSetMakerTags>
						<costList>
							<Steel>60</Steel>
							<ComponentIndustrial>8</ComponentIndustrial>
						</costList>
						<recipeMaker>
							<researchPrerequisite>SpecializedLimbs</researchPrerequisite>
						</recipeMaker>
						<statBases>
							<WorkToMake>8000</WorkToMake>
						</statBases>
						<techHediffsTags>
						  <li>SawArm</li>
						</techHediffsTags>
						<comps>
							<li Class="MSE2.CompProperties_IncludedChildParts">
								<standardChildren>
									<li>MechanicalManipulator</li>
									<li>MechanicalInternalSupport</li>
								</standardChildren>
							</li>
						</comps>
					</ThingDef>
					
					<ThingDef ParentName="BodyPartProstheticImperialBase">
						<defName>MediHand</defName>
						<label>medi - hand</label>
						<description>A biomechanical arm replacement. With it's built in morphine injectors and electrocautery blade, it can allow the user to rapidly tend wounds or apply surgery. It also has a general-purpose manipulator. It is somewhat ungainly, which slows down movement slightly.</description>
						<descriptionHyperlinks>
							<RecipeDef>InstallMediHand</RecipeDef>
						</descriptionHyperlinks>
						<thingSetMakerTags><li>RewardStandardLowFreq</li></thingSetMakerTags>
						<costList>
							<Steel>60</Steel>
							<ComponentIndustrial>8</ComponentIndustrial>
						</costList>
						<recipeMaker>
							<researchPrerequisite>SpecializedLimbs</researchPrerequisite>
						</recipeMaker>
						<techHediffsTags>
						  <li>MediHand</li>
						</techHediffsTags>
						<comps>
							<li Class="MSE2.CompProperties_IncludedChildParts">
								<standardChildren>
									<li>MechanicalFinger</li>
								</standardChildren>
							</li>
						</comps>
					</ThingDef>
					
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>Defs/RecipeDef[defName="InstallMechanicalManipulator" or defName="InstallMechanicalInternalSupport"]/modExtensions/li[@Class="MSE2.InstallationRestrictions"]/whitelist</xpath>
					<value>
						<li>WelderArm</li>
						<li>SawArm</li>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>Defs/RecipeDef[defName="InstallMechanicalFinger"]/modExtensions/li[@Class="MSE2.InstallationRestrictions"]/whitelist</xpath>
					<value>
						<li>MediHand</li>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
					<xpath>Defs/HediffDef[defName="WelderArm"]/spawnThingOnRemoved</xpath>
					<value>
						<spawnThingOnRemoved>WelderArm</spawnThingOnRemoved>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
					<xpath>Defs/RecipeDef[defName="InstallDrillArm"]/appliedOnFixedBodyParts/li</xpath>
					<value>
						<li>Arm</li>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
					<xpath>Defs/HediffDef[defName="SawArm"]/comps/li[@Class="HediffCompProperties_VerbGiver"]/tools</xpath>
					<value>
						<tools>
							<li Class="CombatExtended.ToolCE">
								<label>saw</label>
								<capacities>
									<li>Cut</li>
								</capacities>
								<power>8</power>
								<cooldownTime>1.88</cooldownTime>
								<armorPenetrationSharp>0.04</armorPenetrationSharp>
								<armorPenetrationBlunt>0.32</armorPenetrationBlunt>
								<alwaysTreatAsWeapon>true</alwaysTreatAsWeapon>
								<soundMeleeHit>MeleeHit_DrillArm</soundMeleeHit>
								<soundMeleeMiss>MeleeMiss_DrillArm</soundMeleeMiss>
							</li>
						</tools>
					</value>
				</li>
				
				<li Class="PatchOperationReplace">
					<xpath>Defs/HediffDef[defName="WelderArm"]/comps/li[@Class="HediffCompProperties_VerbGiver"]/tools</xpath>
					<value>
						<tools>
							<li Class="CombatExtended.ToolCE">
								<label>saw</label>
								<capacities>
									<li>Cut</li>
								</capacities>
								<power>1</power>
								<extraMeleeDamages>
									<li>
										<def>Flame_Secondary</def>
										<amount>7</amount>
										<chance>1</chance>
									</li>
								</extraMeleeDamages>
								<cooldownTime>1.88</cooldownTime>
								<armorPenetrationSharp>0.04</armorPenetrationSharp>
								<armorPenetrationBlunt>0.32</armorPenetrationBlunt>
								<alwaysTreatAsWeapon>true</alwaysTreatAsWeapon>
								<soundMeleeHit>MeleeHit_DrillArm</soundMeleeHit>
								<soundMeleeMiss>MeleeMiss_DrillArm</soundMeleeMiss>
							</li>
						</tools>
					</value>
				</li>
				
				</operations>
				</match>
			</li>
			-->
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ResearchProjectDef[defName="ReconArmor"]/prerequisites</xpath>
		<value>
			<li>FlakArmor</li>
			<li>CE_AdvancedNV</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Weapons Expanded</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="VWE_MeleeWeapon_Baton"]/recipeMaker/researchPrerequisite</xpath>
				<value>
				  <researchPrerequisites>
					<li>VWE_SpecializedFirearms</li>
				  </researchPrerequisites>
				</value>
			</li>

			<li Class="PatchOperationReplace">
				<xpath>/Defs/ResearchProjectDef[defName="VWE_SpecializedFirearms"]/description</xpath>
				<value>
				  <description>Craft specialized firearms and weapons for demanding combat scenarios.</description>
				</value>
			</li>

			<li Class="PatchOperationReplace">
				<xpath>/Defs/ResearchProjectDef[defName="VWE_SpecializedFirearms"]/label</xpath>
				<value>
				  <label>specialized weapons</label>
				</value>
			</li>

			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="VWE_MeleeWeapon_Shovel"]/recipeMaker/researchPrerequisite</xpath>
				<value>
				  <researchPrerequisites>
					<li>Smithing</li>
				  </researchPrerequisites>
				</value>
			</li>

			<li Class="PatchOperationReplace">
				<xpath>Defs/ThingDef[defName="VWE_MeleeWeapon_CombatKnife"]/recipeMaker/researchPrerequisite</xpath>
				<value>
				  <researchPrerequisites>
					<li>VWE_SpecializedFirearms</li>
				  </researchPrerequisites>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ResearchProjectDef[defName="ChargedShot"]/prerequisites</xpath>
				<value>
					<li>VWE_SpecializedFirearms</li>
				</value>
			</li>
			
			<li Class="PatchOperationFindMod">
			<mods>
				<li>Combat Extended Armory</li>
			</mods>
				<match Class="PatchOperationSequence">
				<operations>
				
				<li Class="PatchOperationAdd">
					<xpath>Defs/ResearchProjectDef[defName="ReconArmor"]/prerequisites</xpath>
					<value>
						<li>compositearmor</li>
					</value>
				</li>
				
				<li Class="PatchOperationFindMod">
				<mods>
					<li>[HRK] Gun Nut - CORE</li>
				</mods>
					<match Class="PatchOperationSequence">
					<operations>
						
					<li Class="PatchOperationAdd">
						<xpath>Defs/ResearchProjectDef[defName="HRK_Research_GunNut"]/prerequisites</xpath>
						<value>
							<li>VWE_SpecializedFirearms</li>
						</value>
					</li>
					
					<li Class="PatchOperationAdd">
						<xpath>Defs/ResearchProjectDef[defName="ChargedShot"]/prerequisites</xpath>
						<value>
							<li>HRK_Research_GunNut</li>
						</value>
					</li>
						
					</operations>
					</match>
				</li>
					
					
				</operations>
				</match>
			</li>
	
		</operations>
		</match>
	</Operation>
	<!--
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Animal Gear</li>
		<li>Hi-power Animal Bionics</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/BodyDef[defName="Bird" or 
					defName="TurtleLike" or 
					defName="Monkey" or 
					defName="Snake" or 
					contains(defName, "BeetleLike") or 
					contains(defName, "QuadrupedAnimal")]//*[self::corePart or self::li][not(groups)][not(ancestor::groups)]</xpath>
				<value>
					<groups />
				</value>
			</li>	
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/BodyDef[defName="Bird" or 
					defName="TurtleLike" or 
					defName="Monkey" or 
					defName="Snake" or 
					contains(defName, "BeetleLike") or 
					contains(defName, "QuadrupedAnimal")]/corePart/parts//li[def="Tail"]/groups</xpath>
				<value>
					<li>CoveredByNaturalArmor</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	-->
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Simple Industrial Factions</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[
				@Name="AmmoShotgunBase" or
				@Name="AmmoPistomMagnum" or
				@Name="AmmoRifleBase" or
				@Name="AmmoRifleIntermediateBase" or
				@Name="AmmoPistolBase"
				]/tradeTags</xpath>
				<value>
					<li>TI_AmmoSmall</li>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/ThingDef[
				@Name="AmmoLauncherGrenadeBase" or
				@Name="AmmoAntiMaterielBase"
				]/tradeTags</xpath>
				<value>
					<li>TI_AmmoMedium</li>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>Defs/TraderKindDef[defName="Base_TIndustrial_Standard"]/stockGenerators</xpath>
				<value>
				
				  <li Class="StockGenerator_Tag">
					<tradeTag>TI_AmmoSmall</tradeTag>
					<thingDefCountRange>4~10</thingDefCountRange>
					<countRange>200~1000</countRange>
				  </li>
				  <li Class="StockGenerator_Tag">
					<tradeTag>TI_AmmoMedium</tradeTag>
					<thingDefCountRange>0~4</thingDefCountRange>
					<countRange>25~150</countRange>
				  </li>
				  <li Class="StockGenerator_Tag">
					<tradeTag>TI_AmmoHeavy</tradeTag>
					<thingDefCountRange>0~2</thingDefCountRange>
					<countRange>5~25</countRange>
				  </li>
				  
				</value>
			</li>
			
			<li Class="PatchOperationFindMod">
			<mods>
				<li>Expanded Materials - Metals</li>
			</mods>
				<match Class="PatchOperationSequence">
				<operations>
					
					<li Class="PatchOperationAdd">
						<xpath>Defs/TraderKindDef[
							defName="Base_Outlander_Standard" or
							defName="Base_TIndustrial_Standard" or
							defName="Orbital_BulkGoods"]/stockGenerators
						</xpath>
						<value>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Coal</thingDef>
							<countRange>500~800</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_StainlessSteel</thingDef>
							<countRange>150~250</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_TemperedSteel</thingDef>
							<countRange>100~200</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Titanium</thingDef>
							<countRange>100~200</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Germanium</thingDef>
							<countRange>50~100</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Lead</thingDef>
							<countRange>300~600</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Copper</thingDef>
							<countRange>200~400</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Tin</thingDef>
							<countRange>200~400</countRange>
						  </li>
						</value>
					</li>
					
					<li Class="PatchOperationAdd">
						<xpath>Defs/TraderKindDef[defName="Caravan_Outlander_BulkGoods" or defName="Caravan_TIndustrial_BulkGoods"]/stockGenerators</xpath>
						<value>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Coal</thingDef>
							<countRange>250~400</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_StainlessSteel</thingDef>
							<countRange>50~150</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_TemperedSteel</thingDef>
							<countRange>25~85</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Titanium</thingDef>
							<countRange>25~85</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Germanium</thingDef>
							<countRange>5~50</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Lead</thingDef>
							<countRange>150~300</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Copper</thingDef>
							<countRange>100~200</countRange>
						  </li>
						  <li Class="StockGenerator_SingleDef">
							<thingDef>EM_Tin</thingDef>
							<countRange>100~200</countRange>
						  </li>
						</value>
					</li>
					
					
				</operations>
				</match>
			</li>

	</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Machinists - A Faction Expansion</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
			<li Class="PatchOperationFindMod">
			<mods>
				<li>Rimsenal - Augmented Vanilla Pack</li>
			</mods>
				<match Class="PatchOperationSequence">
				<operations>
				
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThingDef[defName="Gun_PistolHeavyRevolver"]</xpath>
					<value>
						<weaponTags>
							<li>SEX_MinutemanWeapons</li>
						</weaponTags>
					</value>
				</li>
				
				<li Class="PatchOperationAdd">
					<xpath>Defs/ThingDef[defName="Gun_RSCarbine"]/weaponTags</xpath>
					<value>
						<li>SEX_SoldierWeapons</li>
						<li>SEX_LightMercWeapons</li>
					</value>
				</li>
				
				</operations>
				</match>
			</li>
			
			<li Class="PatchOperationConditional">
				<xpath>/Defs/FactionDef[@Name="MachinistFactionBase"]/baseTraderKinds</xpath>
				<nomatch Class="PatchOperationAdd">
					<xpath>/Defs/FactionDef[@Name="MachinistFactionBase"]</xpath>
					<value>
						<baseTraderKinds>
						  <li>Base_TIndustrial_Standard</li>
						</baseTraderKinds>
					</value>
				</nomatch>
				<match Class="PatchOperationReplace">
					<xpath>/Defs/FactionDef[@Name="MachinistFactionBase"]/baseTraderKinds</xpath>
					<value>
						<baseTraderKinds>
						  <li>Base_TIndustrial_Standard</li>
						</baseTraderKinds>
					</value>
				</match>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Psycasts Expanded</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/DamageDef[defName="EMP"]/defaultDamage</xpath>
				<value>
					<defaultDamage>12</defaultDamage>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationAdd">
		<xpath>/Defs/ThingDef[@Name="CatapultShellBase"]/tradeTags</xpath>
		<value>
			<li>CE_PreIndustrialAmmo</li>
			<li>CE_AutoEnableCrafting_FueledSmithy</li>
			<li>CE_AutoEnableCrafting_ElectricSmithy</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Furniture Expanded - Production</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[
					@Name="MusketBallBase" or
					@Name="BlunderbussShotBase" or
					@Name="CannonBallBase" or
					@Name="AmmoCrossbowBoltBase" or
					@Name="MiniCannonBallBase" or
					@Name="HandMortarBombBase" or
					@Name="CatapultShellBase" or
					@Name="AmmoArrowBase" or
					@Name="AmmoGreatArrowBase"
					]/tradeTags</xpath>
				<value>
					<li>CE_AutoEnableCrafting_VFE_TableSmithyLarge</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Helixien Gas Expanded</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[
					@Name="MusketBallBase" or
					@Name="BlunderbussShotBase" or
					@Name="CannonBallBase" or
					@Name="AmmoCrossbowBoltBase" or
					@Name="MiniCannonBallBase" or
					@Name="HandMortarBombBase" or
					@Name="CatapultShellBase" or
					@Name="AmmoArrowBase" or
					@Name="AmmoGreatArrowBase"
					]/tradeTags</xpath>
				<value>
					<li>CE_AutoEnableCrafting_VHGE_GasPoweredSmithy</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Research Data</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationRemove">
				<xpath>/Defs/ThingDef[
					defName="ResearchPapers" or
					defName="ResearchData" or
					defName="AnalyzerData" or
					defName="ArchotechData"
					]/thingSetMakerTags</xpath>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Pocket Sand</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
		<li Class="PatchOperationFindMod">
		<mods>
			<li>Giddy-Up 2 Forked</li>
		</mods>
			<match Class="PatchOperationSequence">
			<operations>
				
			<li Class="PatchOperationAddModExtension">
				<xpath>Defs/JobDef[defName="PS_Equip" or defName="PS_Drop"]</xpath>
				<value>
					<li Class="GiddyUp.CanDoMounted"/>
				</value>
			</li>
				
			</operations>
			</match>
		</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Vehicles Expanded</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/Vehicles.VehicleBuildDef[defName="VVE_Highwayman_Blueprint" or defName="VVE_Bulldog_Blueprint" or defName="VVE_Tango_Blueprint"]/researchPrerequisites</xpath>
				<value>
					<li>PrecisionRifling</li>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/Vehicles.VehicleBuildDef[defName="VVE_Scytheman_Blueprint" or defName="VVE_Bunsen_Blueprint"]/researchPrerequisites</xpath>
				<value>
					<li>CE_Launchers</li>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/Vehicles.VehicleBuildDef[defName="VVE_Roadkill_Blueprint" or defName="VVE_Bulldog_Blueprint"]/researchPrerequisites</xpath>
				<value>
					<li>CE_TurretHeavyWeapons</li>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/Vehicles.VehicleBuildDef[defName="VVE_Tango_Blueprint"]/researchPrerequisites</xpath>
				<value>
					<li>HeavyTurrets</li>
				</value>
			</li>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/Vehicles.VehicleBuildDef[defName="VVE_Frog_Blueprint" or defName="VVE_Toad_Blueprint"]/researchPrerequisites</xpath>
				<value>
					<li>TransportPod</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Panther</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationAdd">
				<xpath>/Defs/Vehicles.VehicleBuildDef[defName="Panther_Blueprint"]/researchPrerequisites</xpath>
				<value>
					<li>CE_TurretHeavyWeapons</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Star Wars Retheme: Vanilla Factions Expanded - Deserters</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
			<li Class="PatchOperationAddModExtension">
				<xpath>Defs/ThingDef[defName="Ammo_PlasmaGasCartridge_Standard"]</xpath>
				<value>
					<li Class="VFED.ContrabandExtension">
						<category>VFED_Imperial</category>
						<intelCost>5</intelCost>
						<useCriticalIntel>false</useCriticalIntel>
						<countMult>100</countMult>
					</li>
				</value>
			</li>
			
			<li Class="PatchOperationAddModExtension">
				<xpath>Defs/ThingDef[defName="Ammo_PlasmaGasCartridge_AP"]</xpath>
				<value>
					<li Class="VFED.ContrabandExtension">
						<category>VFED_Imperial</category>
						<intelCost>5</intelCost>
						<useCriticalIntel>false</useCriticalIntel>
						<countMult>100</countMult>
					</li>
				</value>
			</li>
			
			<li Class="PatchOperationAddModExtension">
				<xpath>Defs/ThingDef[defName="Ammo_PlasmaGasCartridge_Ion"]</xpath>
				<value>
					<li Class="VFED.ContrabandExtension">
						<category>VFED_Imperial</category>
						<intelCost>5</intelCost>
						<useCriticalIntel>false</useCriticalIntel>
						<countMult>100</countMult>
					</li>
				</value>
			</li>
			
			<li Class="PatchOperationAddModExtension">
				<xpath>Defs/ThingDef[defName="Ammo_PlasmaGasCartridge_Stun"]</xpath>
				<value>
					<li Class="VFED.ContrabandExtension">
						<category>VFED_Imperial</category>
						<intelCost>5</intelCost>
						<useCriticalIntel>false</useCriticalIntel>
						<countMult>100</countMult>
					</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>The Corporation - Mort's Factions</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/ThingDef[defName="MF_CorporateCompletedPaperwork"]/statBases/MarketValue</xpath>
				<value>
					<MarketValue>3</MarketValue>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Mechanitor Balance Tweaks</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			<li Class="PatchOperationRemove">
				<xpath>/Defs/RecipeDef[defName="Pikeman"]/researchPrerequisites/li[.="ShieldBelt"]</xpath>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>/Defs/ThingDef[defName="Mech_Pikeman"]/comps/li[@Class="CompProperties_Shield"]</xpath>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>/Defs/ThingDef[defName="Mech_Pikeman"]/statBases/EnergyShieldEnergyMax</xpath>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>/Defs/ThingDef[defName="Mech_Pikeman"]/statBases/EnergyShieldRechargeRate</xpath>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/RecipeDef[
				defName="Constructoid" or
				defName="Agrihand"
				]/researchPrerequisite</xpath>
				<value>
					<researchPrerequisite Inherit="False">BasicMechtech</researchPrerequisite>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/RecipeDef[defName="Constructoid"]/ingredients</xpath>
				<value>
					<ingredients Inherit="False">
						<li>
						<filter>
							<thingDefs>
							<li>Steel</li>
							</thingDefs>
						</filter>
						<count>75</count>
						</li>
						<li>
						<filter>
							<thingDefs>
							<li>SubcoreBasic</li>
							</thingDefs>
						</filter>
						<count>1</count>
						</li>
						<li>
						<filter>
							<thingDefs>
							<li>MechanoidSkillPackage_Construction</li>
							</thingDefs>
						</filter>
						<count>1</count>
						</li>
						<li>
						<filter>
							<thingDefs>
							<li>GestationMechaniteCanisterMBT</li>
							</thingDefs>
						</filter>
						<count>1</count>
						</li>
					 </ingredients>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/RecipeDef[defName="Agrihand"]/ingredients</xpath>
				<value>
					<ingredients Inherit="False">
						<li>
						<filter>
							<thingDefs>
							<li>Steel</li>
							</thingDefs>
						</filter>
						<count>75</count>
						</li>
						<li>
						<filter>
							<thingDefs>
							<li>SubcoreBasic</li>
							</thingDefs>
						</filter>
						<count>1</count>
						</li>
						<li>
						<filter>
							<thingDefs>
							<li>MechanoidSkillPackage_Plants</li>
							</thingDefs>
						</filter>
						<count>1</count>
						</li>
						<li>
						<filter>
							<thingDefs>
							<li>GestationMechaniteCanisterMBT</li>
							</thingDefs>
						</filter>
						<count>1</count>
						</li>
					 </ingredients>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/ThingDef[
				defName="MechanoidSkillPackage_Plants" or
				defName="MechanoidSkillPackage_Mining" or
				defName="MechanoidSkillPackage_Construction" or
				defName="MechanoidSkillPackage_Crafting" or
				defName="MechanoidSkillPackage_Cooking" or
				defName="MechanoidSkillPackage_Medical" or
				defName="MechanoidSkillPackage_Intellectual" or
				defName="MechanoidSkillPackage_Melee" or
				defName="MechanoidSkillPackage_Shooting"
				]/recipeMaker/researchPrerequisite</xpath>
				<value>
					<researchPrerequisite>BasicMechtech</researchPrerequisite>
				</value>
			</li>
			
			<li Class="PatchOperationReplace">
				<xpath>/Defs/ThingDef[defName="MechanoidSkillEncoder"]/researchPrerequisites/li</xpath>
				<value>
					<li>BasicMechtech</li>
				</value>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>/Defs/ThingDef[defName="MechanoidSkillEncoder" or defName="MechaniteGestatorMBT"]/comps/li[@Class="CompProperties_Glower"]</xpath>
			</li>
			
			<li Class="PatchOperationRemove">
				<xpath>/Defs/ThingDef[defName="MechaniteGestatorMBT"]/comps/li[@Class="CompProperties_MoteEmitter"]</xpath>
			</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>More combat mechanoids [CE only]</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
			
			
			<li Class="PatchOperationAddModExtension">
				<xpath>Defs/PawnKindDef[defName="Mech_Trebuchet"]</xpath>
				<value>	
					<li Class="CombatExtended.LoadoutPropertiesExtension">	
						<primaryMagazineCount>
							<min>20</min>
							<max>25</max>
						</primaryMagazineCount>
					</li>
				</value>
			</li>
			
		</operations>
		</match>
	</Operation>
	<!--
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Vanilla Expanded Framework</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
		<li Class="PatchOperationAddModExtension">
			<xpath>/Defs/StorytellerDef[@Name="BaseStoryteller"]</xpath>
			<value>
				<li Class="VanillaStorytellersExpanded.StorytellerDefExtension">	
					<storytellerThreat>
						<raidWarningRange>2500</raidWarningRange>
						<allDamagesMultiplier>1</allDamagesMultiplier>
					</storytellerThreat>
				</li>
			</value>
		</li>
		
		<li Class="PatchOperationRemove">
			<xpath>/Defs/IncidentDef[defName="VSE_Reinforcements"]</xpath>
		</li>
		
		</operations>
		</match>
	</Operation>
	-->
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Anomaly Portal CE Patch</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
		<li Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="AP_MetalStorm"]/statBases/ArmorRating_Sharp</xpath>
			<value>
				<ArmorRating_Sharp>6</ArmorRating_Sharp>
			</value>
		</li>
		
		<li Class="PatchOperationAdd">
			<xpath>Defs/ThingDef[defName="AP_MetalStorm"]/statBases/ArmorRating_Blunt</xpath>
			<value>
				<ArmorRating_Blunt>12</ArmorRating_Blunt>
			</value>
		</li>
			
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Rimsenal Xenotype Pack - Askbarn</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
		<li Class="PatchOperationAdd">
			<xpath>Defs/GeneDef[defName="EMPSurge" or defName="EMPRoar"]</xpath>
			<value>
				<damageFactors>
					<Electrical>0</Electrical>
				</damageFactors>
			</value>
		</li>
		
		<li Class="PatchOperationReplace">
			<xpath>Defs/AbilityDef[defName="ThunderingRoar"]/verbProperties/requireLineOfSight</xpath>
			<value>
				<requireLineOfSight>true</requireLineOfSight>
			</value>
		</li>
		
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>SF Grim Reality</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
		<li Class="PatchOperationReplace">
			<xpath>*/ThoughtDef[defName = "AteWithoutTable"]/stages/li[1]/baseMoodEffect</xpath>
			<value>
				<baseMoodEffect>-3</baseMoodEffect>
			</value>
		</li>
		
		</operations>
		</match>
	</Operation>
	
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Basic Medicine</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
		<li Class="PatchOperationAdd">
			<xpath>Defs/ThingSetMakerDef[defName = "OutlanderRaidLootMaker" or defName = "PirateRaidLootMaker"]/root/fixedParams/filter/thingDefs</xpath>
			<value>
				<li>MedicineBasic</li>
			</value>
		</li>
		
		<li Class="PatchOperationAdd">
			<xpath>Defs/TraderKindDef[defName = "Base_Outlander_Standard" or defName = "Caravan_Outlander_CombatSupplier" or defName = "Orbital_BulkGoods"]/stockGenerators</xpath>
			<value>
			  <li Class="StockGenerator_SingleDef">
				<thingDef>MedicineBasic</thingDef>
				<countRange>25~50</countRange>
			  </li>
			</value>
		</li>
		
		<li Class="PatchOperationAdd">
			<xpath>Defs/TraderKindDef[defName = "Visitor_Outlander_Standard"]/stockGenerators</xpath>
			<value>
			  <li Class="StockGenerator_SingleDef">
				<thingDef>MedicineBasic</thingDef>
				<countRange>2~8</countRange>
			  </li>
			</value>
		</li>
		
		</operations>
		</match>
	</Operation>
	<!--
	<Operation Class="PatchOperationFindMod">
    <mods>
		<li>Big and Small - Framework</li>
    </mods>
		<match Class="PatchOperationSequence">
		<operations>
		
		<li Class="PatchOperationFindMod">
		<mods>
			<li>More Injuries (Continued)</li>
		</mods>
			<match Class="PatchOperationSequence">
			<operations>
			
			<li Class="PatchOperationReplace">
				<xpath>*/ThoughtDef[defName = "AteWithoutTable"]/stages/li[1]/baseMoodEffect</xpath>
				<value>
					<baseMoodEffect>-3</baseMoodEffect>
				</value>
			</li>
			
			</operations>
			</match>
		</li>
		
		</operations>
		</match>
	</Operation>
	-->
	
</Patch>